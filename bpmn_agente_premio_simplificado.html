<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPMN - Agente Simplificado de Pr√™mio</title>
    <script src="https://unpkg.com/bpmn-js@17.0.2/dist/bpmn-navigated-viewer.production.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        #canvas {
            height: 500px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .info-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .info-box h2 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.3em;
        }
        
        .table-percentuais {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .table-percentuais th,
        .table-percentuais td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        .table-percentuais th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        
        .table-percentuais tr:hover {
            background: #f1f3f5;
        }
        
        .flow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .step {
            background: white;
            border: 2px solid #667eea;
            padding: 15px;
            border-radius: 8px;
        }
        
        .step h3 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.1em;
        }
        
        .step p {
            margin: 5px 0;
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Agente Simplificado de An√°lise de Pr√™mio</h1>
        <p class="subtitle">Sistema de Decis√£o Automatizada baseado em Percentuais M√≠nimos</p>
        
        <div id="canvas"></div>
        
        <div class="info-box">
            <h2>üìã Tabela de Percentuais M√≠nimos</h2>
            <table class="table-percentuais">
                <thead>
                    <tr>
                        <th>Faixa de Valor</th>
                        <th>Percentual M√≠nimo</th>
                        <th>Exemplo (R$ 5M)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>R$ 1M - R$ 5M</strong></td>
                        <td><strong>7%</strong></td>
                        <td>R$ 350.000</td>
                    </tr>
                    <tr>
                        <td><strong>R$ 5M - R$ 10M</strong></td>
                        <td><strong>6%</strong></td>
                        <td>R$ 300.000</td>
                    </tr>
                    <tr>
                        <td><strong>Acima de R$ 10M</strong></td>
                        <td><strong>5%</strong></td>
                        <td>R$ 500.000 (em R$ 10M)</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="info-box">
            <h2>üîÑ Etapas do Fluxo</h2>
            <div class="flow-steps">
                <div class="step">
                    <h3>1Ô∏è‚É£ Receber Licita√ß√£o</h3>
                    <p>Entrada de dados: valor total e percentual de pr√™mio oferecido</p>
                </div>
                <div class="step">
                    <h3>2Ô∏è‚É£ Identificar Faixa</h3>
                    <p>Classifica a licita√ß√£o na faixa correta baseado no valor total</p>
                </div>
                <div class="step">
                    <h3>3Ô∏è‚É£ Verificar Percentual</h3>
                    <p>Compara percentual oferecido com m√≠nimo exigido da faixa</p>
                </div>
                <div class="step">
                    <h3>4Ô∏è‚É£ Decis√£o Final</h3>
                    <p>PARTICIPAR se ‚â• m√≠nimo, N√ÉO PARTICIPAR se < m√≠nimo</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const bpmnXML = `<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" 
                  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" 
                  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" 
                  xmlns:di="http://www.omg.org/spec/DD/20100524/DI" 
                  id="Definitions_1" 
                  targetNamespace="http://bpmn.io/schema/bpmn">
  
  <bpmn:process id="Process_1" isExecutable="true">
    
    <!-- Start Event -->
    <bpmn:startEvent id="StartEvent_1" name="Nova Licita√ß√£o&#10;Recebida">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>
    
    <!-- Task 1: Extrair Dados -->
    <bpmn:task id="Task_1" name="Extrair Dados&#10;(Valor Total e % Pr√™mio)">
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:task>
    
    <!-- Task 2: Identificar Faixa -->
    <bpmn:task id="Task_2" name="Identificar Faixa&#10;de Valor">
      <bpmn:incoming>Flow_2</bpmn:incoming>
      <bpmn:outgoing>Flow_3</bpmn:outgoing>
    </bpmn:task>
    
    <!-- Task 3: Obter Percentual M√≠nimo -->
    <bpmn:task id="Task_3" name="Obter % M√≠nimo&#10;da Faixa">
      <bpmn:incoming>Flow_3</bpmn:incoming>
      <bpmn:outgoing>Flow_4</bpmn:outgoing>
    </bpmn:task>
    
    <!-- Gateway: Verificar Percentual -->
    <bpmn:exclusiveGateway id="Gateway_1" name="% Oferecido ‚â•&#10;% M√≠nimo?">
      <bpmn:incoming>Flow_4</bpmn:incoming>
      <bpmn:outgoing>Flow_5_Sim</bpmn:outgoing>
      <bpmn:outgoing>Flow_5_Nao</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    
    <!-- Task 4: Gerar Relat√≥rio Positivo -->
    <bpmn:task id="Task_4" name="Gerar Relat√≥rio&#10;Positivo">
      <bpmn:incoming>Flow_5_Sim</bpmn:incoming>
      <bpmn:outgoing>Flow_6</bpmn:outgoing>
    </bpmn:task>
    
    <!-- Task 5: Gerar Relat√≥rio Negativo -->
    <bpmn:task id="Task_5" name="Gerar Relat√≥rio&#10;Negativo">
      <bpmn:incoming>Flow_5_Nao</bpmn:incoming>
      <bpmn:outgoing>Flow_7</bpmn:outgoing>
    </bpmn:task>
    
    <!-- End Events -->
    <bpmn:endEvent id="EndEvent_1" name="‚úÖ PARTICIPAR">
      <bpmn:incoming>Flow_6</bpmn:incoming>
    </bpmn:endEvent>
    
    <bpmn:endEvent id="EndEvent_2" name="‚ùå N√ÉO PARTICIPAR">
      <bpmn:incoming>Flow_7</bpmn:incoming>
    </bpmn:endEvent>
    
    <!-- Sequence Flows -->
    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="Task_1" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_1" targetRef="Task_2" />
    <bpmn:sequenceFlow id="Flow_3" sourceRef="Task_2" targetRef="Task_3" />
    <bpmn:sequenceFlow id="Flow_4" sourceRef="Task_3" targetRef="Gateway_1" />
    <bpmn:sequenceFlow id="Flow_5_Sim" name="Sim" sourceRef="Gateway_1" targetRef="Task_4" />
    <bpmn:sequenceFlow id="Flow_5_Nao" name="N√£o" sourceRef="Gateway_1" targetRef="Task_5" />
    <bpmn:sequenceFlow id="Flow_6" sourceRef="Task_4" targetRef="EndEvent_1" />
    <bpmn:sequenceFlow id="Flow_7" sourceRef="Task_5" targetRef="EndEvent_2" />
    
  </bpmn:process>
  
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
      
      <!-- Start Event -->
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="135" y="145" width="70" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- Task 1 -->
      <bpmndi:BPMNShape id="Task_1_di" bpmnElement="Task_1">
        <dc:Bounds x="250" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task 2 -->
      <bpmndi:BPMNShape id="Task_2_di" bpmnElement="Task_2">
        <dc:Bounds x="410" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task 3 -->
      <bpmndi:BPMNShape id="Task_3_di" bpmnElement="Task_3">
        <dc:Bounds x="570" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Gateway 1 -->
      <bpmndi:BPMNShape id="Gateway_1_di" bpmnElement="Gateway_1" isMarkerVisible="true">
        <dc:Bounds x="735" y="95" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="720" y="60" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- Task 4 -->
      <bpmndi:BPMNShape id="Task_4_di" bpmnElement="Task_4">
        <dc:Bounds x="860" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task 5 -->
      <bpmndi:BPMNShape id="Task_5_di" bpmnElement="Task_5">
        <dc:Bounds x="860" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- End Events -->
      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1">
        <dc:Bounds x="1032" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1013" y="145" width="75" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="EndEvent_2_di" bpmnElement="EndEvent_2">
        <dc:Bounds x="1032" y="222" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1007" y="265" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- Edges -->
      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1">
        <di:waypoint x="188" y="120" />
        <di:waypoint x="250" y="120" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2">
        <di:waypoint x="350" y="120" />
        <di:waypoint x="410" y="120" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_3_di" bpmnElement="Flow_3">
        <di:waypoint x="510" y="120" />
        <di:waypoint x="570" y="120" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_4_di" bpmnElement="Flow_4">
        <di:waypoint x="670" y="120" />
        <di:waypoint x="735" y="120" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_5_Sim_di" bpmnElement="Flow_5_Sim">
        <di:waypoint x="785" y="120" />
        <di:waypoint x="860" y="120" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="810" y="102" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_5_Nao_di" bpmnElement="Flow_5_Nao">
        <di:waypoint x="760" y="145" />
        <di:waypoint x="760" y="240" />
        <di:waypoint x="860" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="766" y="183" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_6_di" bpmnElement="Flow_6">
        <di:waypoint x="960" y="120" />
        <di:waypoint x="1032" y="120" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_7_di" bpmnElement="Flow_7">
        <di:waypoint x="960" y="240" />
        <di:waypoint x="1032" y="240" />
      </bpmndi:BPMNEdge>
      
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  
</bpmn:definitions>`;

        const viewer = new BpmnJS({
            container: '#canvas'
        });

        viewer.importXML(bpmnXML).then(() => {
            viewer.get('canvas').zoom('fit-viewport');
        }).catch(err => {
            console.error('Error rendering BPMN:', err);
        });
    </script>
</body>
</html>
